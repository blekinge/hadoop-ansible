---
# hadoop configration
core_site_properties:
  - {
    "name": "fs.defaultFS",
    "value": "hdfs://{{ hdfs_name }}"
  }
  - {
    "name": "hadoop.tmp.dir",
    "value": "file:{{ hadoop_tmp }}"
  }
  - {
    "name": "io.file.buffer.size",
    "value": "131072"
  }
  - {
    "name": "dfs.access.time.precision",
    "value": "3600000"
  }
  - {
    "name": "dfs.namenode.accesstime.precision",
    "value": "3600000"
  }
  - {
    "name": "fs.trash.checkpoint.interval",
    "value": "360"
  }
  - {
    "name": "io.compression.codecs",
    "value": "org.apache.hadoop.io.compress.GzipCodec,org.apache.hadoop.io.compress.DefaultCodec,org.apache.hadoop.io.compress.SnappyCodec"
  }
  - {
    "name": "io.serializations",
    "value": "org.apache.hadoop.io.serializer.WritableSerialization"
  }

  - {
    "name": "ha.failover-controller.active-standby-elector.zk.op.retries",
    "value": "120"
  }
#  - {
#    "name": "ha.zookeeper.acl",
#    "value": "sasl:nn:rwcda"
#  }
  - {
    "name": "ha.zookeeper.quorum",
#    https://gist.github.com/halberom/b1f6eaed16dba1b298e8#gistcomment-2642730
    "value": "{{ groups['zookeeper'] | zip_longest([], fillvalue='2181') | map('join', ':') | join(',') }}"
  }
