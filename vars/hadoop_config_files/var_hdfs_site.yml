hdfs_site_properties:
  #General
  - {
    "name": "dfs.replication",
    "value": "3"
  }
  - {
    name: "dfs.replication.max",
    value: 50
  }
  - {
    name: "dfs.support.append",
    value: "true"
  }
  - {
    name: "fs.permissions.umask-mode",
    value: "027"
  }
  - {
    "name": "dfs.blocksize",
    "value": 134217728
  }
  - {
    "name": "dfs.cluster.administrators",
    "value": " hdfs,admins,subadmins"
  }
  - {
    "name": "dfs.permissions.enabled",
    "value": "true"
  }
  - {
    "name": "dfs.permissions.superusergroup",
    "value": "hdfs"
  }
  - {
    name: "dfs.webhdfs.enabled",
    value: "true"
  }



  # Namenode
  - {
    "name": "dfs.namenode.name.dir",
    "value": "{{ hadoop_dfs_name }}"
  }
  - {
    "name": "dfs.namenode.data.dir",
    "value": "{{ hdfs_data_dirs_joined }}"
  }
  - {
    "name": "dfs.namenode.acls.enabled",
    "value": "true"
  }
  - { # TODO
    "name": "dfs.namenode.checkpoint.dir",
    "value": "/hadoop/hdfs/namesecondary"
  }
  - {
    "name": "dfs.namenode.checkpoint.edits.dir",
    "value": "/hadoop/hdfs/namesecondary"
  }
  - {
    "name": "dfs.namenode.rpc-bind-host",
    "value": "0.0.0.0"
  }
  - {
    "name": "dfs.namenode.servicerpc-bind-host",
    "value": "0.0.0.0"
  }
  - {
    "name": "dfs.namenode.safemode.threshold-pct",
    "value": "0.99"
  }

  #Client
  - {
    "name": "dfs.client.read.shortcircuit",
    "value": 4096
  }
  - {
    "name": "dfs.client.use.datanode.hostname",
    "value": "true"
  }

  #Datanode
  - {
    "name": "dfs.datanode.use.datanode.hostname",
    "value": "true"
  }
  - {
    "name": "dfs.datanode.data.dir",
    "value": "{{ hdfs_data_dirs_joined }}"
  }
  - {
    "name": "dfs.datanode.data.dir.perm",
    "value": 750
  }
  - {
    "name": "dfs.datanode.address",
    "value": "0.0.0.0:{{ hdfs_datanode_port }}"
  }
  - {
    "name": "dfs.datanode.http.address",
    "value": "0.0.0.0:{{ hdfs_datanode_http_port }}"
  }
  - {
    "name": "dfs.datanode.https.address",
    "value": "0.0.0.0:{{ hdfs_datanode_https_port }}"
  }

  #HA
  - {
    "name": "dfs.nameservices",
    "value": "{{ hdfs_name }}"
  }
  - {
    "name": "dfs.ha.namenodes.{{ hdfs_name }}",
    "value": "nn1,nn2"
  }
  - {
    "name": "dfs.namenode.rpc-address.{{ hdfs_name }}.nn1",
    "value": "{{ nn1 }}:8020"
  }
  - {
    "name": "dfs.namenode.rpc-address.{{ hdfs_name }}.nn2",
    "value": "{{ nn2 }}:8020"
  }
  - {
    "name": "dfs.namenode.http-address.{{ hdfs_name }}.nn1",
    "value": "{{ nn1 }}:9870"
  }
  - {
    "name": "dfs.namenode.http-address.{{ hdfs_name }}.nn2",
    "value": "{{ nn2 }}:9870"
  }
# TODO https
  - {
    "name": "dfs.namenode.shared.edits.dir",
    "value": "qjournal://{{ groups['zookeeper'] | zip_longest([], fillvalue='8485') | map('join', ':') | join(';') }}/{{ hdfs_name }}"
  }

  - {
    "name": "dfs.client.failover.proxy.provider.{{ hdfs_name }}",
    "value": "org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider"
  }
  - {
    "name": "dfs.ha.fencing.methods",
    "value": "shell(/bin/true)"
  }
  - {
    "name": "dfs.journalnode.edits.dir",
    "value": "{{ hadoop_dfs_journal }}"
  }
  - {
    "name": "dfs.ha.automatic-failover.enabled",
    "value": "true"
  }

  - {
    "name": "",
    "value": ""
  }



  - {
    "name": "dfs.journalnode.http-address",
    "value": "0.0.0.0:8480"
  }
  - {
    "name": "dfs.journalnode.https-address",
    "value": "0.0.0.0:8481"
  }

  - {
    "name": "dfs.datanode.kerberos.principal",
    "value": "dn/_HOST@{{ipaserver_realm}}"
  }
  - {
    "name": "dfs.datanode.keytab.file",
    "value": "/etc/security/keytabs/dn.service.keytab"
  }
  - {
    "name": "dfs.encrypt.data.transfer.cipher.suites",
    "value": "AES/CTR/NoPadding"
  }
  - {
    "name": "dfs.journalnode.kerberos.internal.spnego.principal",
    "value": "HTTP/_HOST@{{ipaserver_realm}}"
  }

  - {
    "name": "dfs.journalnode.kerberos.principal",
    "value": "jn/_HOST@{{ipaserver_realm}}"
  }

  - {
    "name": "dfs.journalnode.keytab.file",
    "value": "/etc/security/keytabs/jn.service.keytab"
  }
  - {
    "name": "dfs.namenode.kerberos.internal.spnego.principal",
    "value": "HTTP/_HOST@{{ipaserver_realm}}"
  }
  - {
    "name": "dfs.namenode.kerberos.principal",
    "value": "nn/_HOST@{{ipaserver_realm}}"
  }
  - {
    "name": "dfs.namenode.keytab.file",
    "value": "/etc/security/keytabs/nn.service.keytab"
  }
  - {
    "name": "dfs.web.authentication.kerberos.keytab",
    "value": "/etc/security/keytabs/spnego.service.keytab"
  }
  - {
    "name": "dfs.web.authentication.kerberos.principal",
    "value": "HTTP/_HOST@{{ipaserver_realm}}"
  }

