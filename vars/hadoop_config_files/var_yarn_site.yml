yarn_resourcemanager_port: 8050
yarn_resourcemanager_scheduler_port: 8030
yarn_resourcemanager_webapp_port: 8088
yarn_resourcemanager_tracker_port: 8025
yarn_resourcemanager_admin_port: 8141

yarn_site_properties:

  - {
    "name": "spark.authenticate",
    "value": "true"
  }

  - {
    "name": "yarn.acl.enable",
    "value": "true"
  }

  - {
    "name": "yarn.admin.acl",
    "value": "yarn,dr.who,abrsadm"
  }

  - {
    "name": "yarn.application.classpath",
    "value": "{{ hadoop_config_path }},{{hadoop_path}}/hadoop-{{hadoop_version}}/lib/*"
  }


  - {
    "name": "yarn.client.nodemanager-connect.max-wait-ms",
    "value": "60000"
  }

  - {
    "name": "yarn.client.nodemanager-connect.retry-interval-ms",
    "value": "10000"
  }

  - {
    "name": "yarn.http.policy",
    "value": "HTTP_ONLY"
  }

  - {
    "name": "yarn.log-aggregation-enable",
    "value": "true"
  }

  - {
    "name": "yarn.log-aggregation.file-controller.IndexedFormat.class",
    "value": "org.apache.hadoop.yarn.logaggregation.filecontroller.ifile.LogAggregationIndexedFileController"
  }

  - {
    "name": "yarn.log-aggregation.file-controller.TFile.class",
    "value": "org.apache.hadoop.yarn.logaggregation.filecontroller.tfile.LogAggregationTFileController"
  }

  - {
    "name": "yarn.log-aggregation.file-formats",
    "value": "IndexedFormat,TFile"
  }

  - {
    "name": "yarn.log-aggregation.retain-seconds",
    "value": "2592000"
  }

  - {
    "name": "yarn.log.server.url",
    "value": "http://{{ yarn_history_server }}:19888/jobhistory/logs"
  }

  - {
    "name": "yarn.log.server.web-service.url",
    "value": "http://{{ yarn_history_server }}:8188/ws/v1/applicationhistory"
  }

  - {
    "name": "yarn.node-labels.enabled",
    "value": "false"
  }

  - {
    "name": "yarn.node-labels.fs-store.retry-policy-spec",
    "value": "2000, 500"
  }

  - {
    "name": "yarn.node-labels.fs-store.root-dir",
    "value": "/system/yarn/node-labels"
  }

  - {
    "name": "yarn.nodemanager.address",
    "value": "0.0.0.0:45454"
  }

  - {
    "name": "yarn.nodemanager.admin-env",
    "value": "MALLOC_ARENA_MAX=$MALLOC_ARENA_MAX"
  }

  - {
    "name": "yarn.nodemanager.aux-services",
    "value": "mapreduce_shuffle"
#      "value": "mapreduce_shuffle,spark_shuffle,spark2_shuffle"

  }

  - {
    "name": "yarn.nodemanager.aux-services.mapreduce_shuffle.class",
    "value": "org.apache.hadoop.mapred.ShuffleHandler"
  }
#
#  - {
#    "name": "yarn.nodemanager.aux-services.spark2_shuffle.class",
#    "value": "org.apache.spark.network.yarn.YarnShuffleService"
#  }
#
#  - {
#    "name": "yarn.nodemanager.aux-services.spark2_shuffle.classpath",
#    "value": "/usr/hdp/current/spark2-client/aux/*"
#  }
#
#  - {
#    "name": "yarn.nodemanager.aux-services.spark_shuffle.class",
#    "value": "org.apache.spark.network.yarn.YarnShuffleService"
#  }
#
#  - {
#    "name": "yarn.nodemanager.aux-services.spark_shuffle.classpath",
#    "value": "/usr/hdp/current/spark-client/aux/*"
#  }

  - {
    "name": "yarn.nodemanager.bind-host",
    "value": "0.0.0.0"
  }

  - {
    "name": "yarn.nodemanager.container-executor.class",
    "value": "org.apache.hadoop.yarn.server.nodemanager.LinuxContainerExecutor"
  }

  - {
    "name": "yarn.nodemanager.container-metrics.unregister-delay-ms",
    "value": "60000"
  }

  - {
    "name": "yarn.nodemanager.container-monitor.interval-ms",
    "value": "3000"
  }

  - {
    "name": "yarn.nodemanager.delete.debug-delay-sec",
    "value": "0"
  }

  - {
    "name": "yarn.nodemanager.disk-health-checker.max-disk-utilization-per-disk-percentage",
    "value": "90"
  }

  - {
    "name": "yarn.nodemanager.disk-health-checker.min-free-space-per-disk-mb",
    "value": "1000"
  }

  - {
    "name": "yarn.nodemanager.disk-health-checker.min-healthy-disks",
    "value": "0.25"
  }

  - {
    "name": "yarn.nodemanager.health-checker.interval-ms",
    "value": "135000"
  }

  - {
    "name": "yarn.nodemanager.health-checker.script.timeout-ms",
    "value": "60000"
  }


  - {
    "name": "yarn.nodemanager.kill-escape.launch-command-line",
    "value": "slider-agent,LLAP"
  }

  - {
    "name": "yarn.nodemanager.kill-escape.user",
    "value": "hive"
  }

  - {
    "name": "yarn.nodemanager.linux-container-executor.cgroups.strict-resource-usage",
    "value": "false"
  }

  - {
    "name": "yarn.nodemanager.linux-container-executor.group",
    "value": "hadoop"
  }

  - {
    "name": "yarn.nodemanager.local-dirs",
    "value": "/yarn/local"
  }

  - {
    "name": "yarn.nodemanager.localizer.cache.cleanup.interval-ms",
    "value": "600000"
  }

  - {
    "name": "yarn.nodemanager.localizer.cache.target-size-mb",
    "value": "10240"
  }

  - {
    "name": "yarn.nodemanager.log-aggregation.compression-type",
    "value": "gz"
  }

  - {
    "name": "yarn.nodemanager.log-aggregation.debug-enabled",
    "value": "false"
  }

  - {
    "name": "yarn.nodemanager.log-aggregation.num-log-files-per-app",
    "value": "336"
  }

  - {
    "name": "yarn.nodemanager.log-aggregation.roll-monitoring-interval-seconds",
    "value": "3600"
  }

  - {
    "name": "yarn.nodemanager.log-dirs",
    "value": "/hadoop/yarn/log"
  }

  - {
    "name": "yarn.nodemanager.log.retain-seconds",
    "value": "2592000"
  }

  - {
    "name": "yarn.nodemanager.pmem-check-enabled",
    "value": "false"
  }

  - {
    "name": "yarn.nodemanager.recovery.dir",
    "value": "/var/log/hadoop/yarn/nodemanager/recovery-state"
  }

  - {
    "name": "yarn.nodemanager.recovery.enabled",
    "value": "true"
  }

  - {
    "name": "yarn.nodemanager.remote-app-log-dir",
    "value": "/history/app-logs"
  }

  - {
    "name": "yarn.nodemanager.remote-app-log-dir-suffix",
    "value": "logs"
  }

  - {
    "name": "yarn.nodemanager.resource.cpu-vcores",
    "value": "32"
  }

  - {
    "name": "yarn.nodemanager.resource.memory-mb",
    "value": "229376"
  }

  - {
    "name": "yarn.nodemanager.resource.percentage-physical-cpu-limit",
    "value": "90"
  }

  - {
    "name": "yarn.nodemanager.vmem-check-enabled",
    "value": "false"
  }

  - {
    "name": "yarn.nodemanager.vmem-pmem-ratio",
    "value": "2.1"
  }
  - {
      "name": "yarn.nodemanager.linux-container-executor.group",
      "value": "{{ hadoop_group }}"
  }



  - {
    "name": "yarn.resourcemanager.address",
    "value": "{{ yarn_history_server }}:8050"
  }

  - {
    "name": "yarn.resourcemanager.admin.address",
    "value": "{{ yarn_history_server }}:8141"
  }

  - {
    "name": "yarn.resourcemanager.am.max-attempts",
    "value": "2"
  }

  - {
    "name": "yarn.resourcemanager.bind-host",
    "value": "0.0.0.0"
  }

  - {
    "name": "yarn.resourcemanager.cluster-id",
    "value": "yarn-cluster"
  }

  - {
    "name": "yarn.resourcemanager.connect.max-wait.ms",
    "value": "900000"
  }

  - {
    "name": "yarn.resourcemanager.connect.retry-interval.ms",
    "value": "15000"
  }

  - {
    "name": "yarn.resourcemanager.fs.state-store.retry-policy-spec",
    "value": "2000, 500"
  }

  - {
    "name": "yarn.resourcemanager.fs.state-store.uri",
    "value": " "
  }


  - {
    "name": "yarn.resourcemanager.hostname",
    "value": "{{ yarn_resource_manager_server1 }}"
  }


  - {
    "name": "yarn.resourcemanager.max-completed-applications",
    "value": "20000"
  }

  - {
    "name": "yarn.resourcemanager.monitor.capacity.preemption.max_ignored_over_capacity",
    "value": "0.1"
  }

  - {
    "name": "yarn.resourcemanager.monitor.capacity.preemption.max_wait_before_kill",
    "value": "1000"
  }

  - {
    "name": "yarn.resourcemanager.monitor.capacity.preemption.monitoring_interval",
    "value": "1000"
  }

  - {
    "name": "yarn.resourcemanager.monitor.capacity.preemption.natural_termination_factor",
    "value": "0.5"
  }

  - {
    "name": "yarn.resourcemanager.monitor.capacity.preemption.total_preemption_per_round",
    "value": "1.0"
  }

  - {
    "name": "yarn.resourcemanager.nodes.exclude-path",
    "value": "{{ hadoop_config_path }}/yarn.exclude"
  }


  - {
    "name": "yarn.resourcemanager.proxy-user-privileges.enabled",
    "value": "true"
  }

  - {
    "name": "yarn.resourcemanager.proxyuser.*.groups",
    "value": ""
  }

  - {
    "name": "yarn.resourcemanager.proxyuser.*.hosts",
    "value": ""
  }

  - {
    "name": "yarn.resourcemanager.proxyuser.*.users",
    "value": ""
  }

  - {
    "name": "yarn.resourcemanager.recovery.enabled",
    "value": "true"
  }

  - {
    "name": "yarn.resourcemanager.resource-tracker.address",
    "value": "{{ yarn_resource_manager_server1 }}:8025"
  }

  - {
    "name": "yarn.resourcemanager.scheduler.address",
    "value": "{{ yarn_resource_manager_server1 }}:8030"
  }

  - {
    "name": "yarn.resourcemanager.scheduler.class",
    "value": "org.apache.hadoop.yarn.server.resourcemanager.scheduler.capacity.CapacityScheduler"
  }

  - {
    "name": "yarn.resourcemanager.scheduler.monitor.enable",
    "value": "true"
  }

  - {
    "name": "yarn.resourcemanager.scheduler.monitor.policies",
    "value": "org.apache.hadoop.yarn.server.resourcemanager.monitor.capacity.ProportionalCapacityPreemptionPolicy"
  }

  - {
    "name": "yarn.resourcemanager.state-store.max-completed-applications",
    "value": "${yarn.resourcemanager.max-completed-applications}"
  }

  - {
    "name": "yarn.resourcemanager.store.class",
    "value": "org.apache.hadoop.yarn.server.resourcemanager.recovery.ZKRMStateStore"
  }

  - {
    "name": "yarn.resourcemanager.system-metrics-publisher.dispatcher.pool-size",
    "value": "10"
  }

  - {
    "name": "yarn.resourcemanager.system-metrics-publisher.enabled",
    "value": "true"
  }

  - {
    "name": "yarn.resourcemanager.webapp.address",
    "value": "{{ yarn_resource_manager_server1 }}:8088"
  }


  - {
    "name": "yarn.resourcemanager.webapp.address.rm1",
    "value": "{{ yarn_resource_manager_server1 }}:8088"
  }

  - {
    "name": "yarn.resourcemanager.webapp.address.rm2",
    "value": "{{ yarn_resource_manager_server2 }}:8088"
  }

  - {
    "name": "yarn.resourcemanager.webapp.delegation-token-auth-filter.enabled",
    "value": "false"
  }

  - {
    "name": "yarn.resourcemanager.webapp.https.address",
    "value": "{{ yarn_resource_manager_server1 }}:8090"
  }

  - {
    "name": "yarn.resourcemanager.webapp.https.address.rm1",
    "value": "{{ yarn_resource_manager_server1 }}:8090"
  }

  - {
    "name": "yarn.resourcemanager.webapp.https.address.rm2",
    "value": "{{ yarn_resource_manager_server2 }}:8090"
  }


  - {
    "name": "yarn.resourcemanager.work-preserving-recovery.enabled",
    "value": "true"
  }

  - {
    "name": "yarn.resourcemanager.work-preserving-recovery.scheduling-wait-ms",
    "value": "10000"
  }

  - {
    "name": "yarn.resourcemanager.zk-address",
    "value": "{{ groups['zookeeper'] | zip_longest([], fillvalue='2181') | map('join', ':') | join(',') }}"
  }

  - {
    "name": "yarn.resourcemanager.zk-num-retries",
    "value": "1000"
  }

  - {
    "name": "yarn.resourcemanager.zk-retry-interval-ms",
    "value": "1000"
  }

  - {
    "name": "yarn.resourcemanager.zk-state-store.parent-path",
    "value": "/rmstore"
  }

  - {
    "name": "yarn.resourcemanager.zk-timeout-ms",
    "value": "10000"
  }

  - {
    "name": "yarn.scheduler.capacity.ordering-policy.priority-utilization.underutilized-preemption.enabled",
    "value": "true"
  }

  - {
    "name": "yarn.scheduler.maximum-allocation-mb",
    "value": "200704"
  }

  - {
    "name": "yarn.scheduler.maximum-allocation-vcores",
    "value": "32"
  }

  - {
    "name": "yarn.scheduler.minimum-allocation-mb",
    "value": "1024"
  }

  - {
    "name": "yarn.scheduler.minimum-allocation-vcores",
    "value": "1"
  }

  - {
    "name": "yarn.timeline-service.address",
    "value": "{{ yarn_history_server }}:10200"
  }

  - {
    "name": "yarn.timeline-service.bind-host",
    "value": "0.0.0.0"
  }

  - {
    "name": "yarn.timeline-service.client.fd-flush-interval-secs",
    "value": "5"
  }

  - {
    "name": "yarn.timeline-service.client.max-retries",
    "value": "30"
  }

  - {
    "name": "yarn.timeline-service.client.retry-interval-ms",
    "value": "1000"
  }

  - {
    "name": "yarn.timeline-service.enabled",
    "value": "true"
  }

  - {
    "name": "yarn.timeline-service.entity-group-fs-store.active-dir",
    "value": "/history/timeline-server/active/"
  }

  - {
    "name": "yarn.timeline-service.entity-group-fs-store.app-cache-size",
    "value": "10"
  }

  - {
    "name": "yarn.timeline-service.entity-group-fs-store.cleaner-interval-seconds",
    "value": "3600"
  }

  - {
    "name": "yarn.timeline-service.entity-group-fs-store.done-dir",
    "value": "/history/timeline-server/done/"
  }

  - {
    "name": "yarn.timeline-service.entity-group-fs-store.group-id-plugin-classes",
    "value": ""
  }

  - {
    "name": "yarn.timeline-service.entity-group-fs-store.group-id-plugin-classpath",
    "value": ""
  }

  - {
    "name": "yarn.timeline-service.entity-group-fs-store.retain-seconds",
    "value": "2592000"
  }

  - {
    "name": "yarn.timeline-service.entity-group-fs-store.scan-interval-seconds",
    "value": "15"
  }

  - {
    "name": "yarn.timeline-service.entity-group-fs-store.summary-store",
    "value": "org.apache.hadoop.yarn.server.timeline.RollingLevelDBTimelineStore"
  }

  - {
    "name": "yarn.timeline-service.generic-application-history.enabled",
    "value": "true"
  }

  - {
    "name": "yarn.timeline-service.generic-application-history.fs-history-store.uri",
    "value": "/history/timeline-server/generic-history"
  }

  - {
    "name": "yarn.timeline-service.generic-application-history.max-applications",
    "value": "30000"
  }

  - {
    "name": "yarn.timeline-service.generic-application-history.store-class",
    "value": "org.apache.hadoop.yarn.server.applicationhistoryservice.FileSystemApplicationHistoryStore"
  }


  - {
    "name": "yarn.timeline-service.http-authentication.proxyuser.*.groups",
    "value": ""
  }

  - {
    "name": "yarn.timeline-service.http-authentication.proxyuser.*.hosts",
    "value": ""
  }

  - {
    "name": "yarn.timeline-service.http-authentication.proxyuser.*.users",
    "value": ""
  }



  - {
    "name": "yarn.timeline-service.http-authentication.signature.secret",
    "value": ""
  }

  - {
    "name": "yarn.timeline-service.http-authentication.signature.secret.file",
    "value": ""
  }

  - {
    "name": "yarn.timeline-service.http-authentication.signer.secret.provider",
    "value": ""
  }

  - {
    "name": "yarn.timeline-service.http-authentication.signer.secret.provider.object",
    "value": ""
  }

  - {
    "name": "yarn.timeline-service.http-authentication.simple.anonymous.allowed",
    "value": "false"
  }




  - {
    "name": "yarn.timeline-service.leveldb-state-store.path",
    "value": "/hadoop/yarn/timeline"
  }

  - {
    "name": "yarn.timeline-service.leveldb-timeline-store.max-open-files",
    "value": "500"
  }

  - {
    "name": "yarn.timeline-service.leveldb-timeline-store.path",
    "value": "/hadoop/yarn/timeline"
  }

  - {
    "name": "yarn.timeline-service.leveldb-timeline-store.read-cache-size",
    "value": "4194304"
  }

  - {
    "name": "yarn.timeline-service.leveldb-timeline-store.start-time-read-cache-size",
    "value": "10000"
  }

  - {
    "name": "yarn.timeline-service.leveldb-timeline-store.start-time-write-cache-size",
    "value": "10000"
  }

  - {
    "name": "yarn.timeline-service.leveldb-timeline-store.ttl-interval-ms",
    "value": "300000"
  }

  - {
    "name": "yarn.timeline-service.leveldb-timeline-store.write-buffer-size",
    "value": "4194304"
  }


  - {
    "name": "yarn.timeline-service.recovery.enabled",
    "value": "true"
  }

  - {
    "name": "yarn.timeline-service.rolling-period",
    "value": "daily"
  }

  - {
    "name": "yarn.timeline-service.state-store-class",
    "value": "org.apache.hadoop.yarn.server.timeline.recovery.LeveldbTimelineStateStore"
  }

  - {
    "name": "yarn.timeline-service.store-class",
    "value": "org.apache.hadoop.yarn.server.timeline.EntityGroupFSTimelineStore"
  }

  - {
    "name": "yarn.timeline-service.ttl-enable",
    "value": "true"
  }

  - {
    "name": "yarn.timeline-service.ttl-ms",
    "value": "2592000000"
  }

  - {
    "name": "yarn.timeline-service.version",
    "value": "1.5"
  }

  - {
    "name": "yarn.timeline-service.webapp.address",
    "value": "{{ yarn_history_server }}:8188"
  }

  - {
    "name": "yarn.timeline-service.webapp.https.address",
    "value": "{{ yarn_history_server }}:8190"
  }
