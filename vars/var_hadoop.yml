---

# hadoop basic vars
# Set a local file here, if you do not want to download it dynamicallyl
hadoop_version: "3.3.0"
hadoop_download: http://ftp.download-by.net/apache/hadoop/common/hadoop-{{hadoop_version}}/hadoop-{{hadoop_version}}.tar.gz
hadoop_path: "/usr/local/hadoop"
hadoop_home: "{{ hadoop_path }}/hadoop-{{ hadoop_version }}"

hadoop_config_path: "/etc/hadoop/conf"
hadoop_tmp: "/tmp/hadoop"
hadoop_log_dir: "/var/log/hadoop"
hadoop_pid_dir: "/var/run/hadoop"

#Common SSL variables
ssl_server_dir: /etc/security/ssl
ssl_client_dir: /etc/security/ssl
ssl_key_size: 2048




#HDFS
hadoop_dfs_name: "/hdfs/dfs/name"
hadoop_dfs_journal: "/hdfs/dfs/journal"
#TODO handle more than 2 namenodes
nn1: "{{ groups['hdfs_namenodes'] | first }}"
nn2: "{{ groups['hdfs_namenodes'] | last }}"

hdfs_name: "KAC"

hdfs_data_dirs:
  - /data/sdb1/hdfs
#  - /data/sdc1/hdfs
#  - /data/sdd1/hdfs
#  - /data/sde1/hdfs
#  - /data/sdf1/hdfs
#  - /data/sdg1/hdfs

hdfs_data_dirs_joined:  "{{ hdfs_data_dirs | join(',') }}"

hdfs_create_path:
  - "{{ hadoop_tmp }}"
  - "{{ hadoop_dfs_name }}"
  - "{{ hadoop_dfs_journal }}"
  - "{{ hadoop_log_dir }}"
  - "{{ hadoop_pid_dir }}"


#YARN

yarn_timeline_store: "/hadoop/yarn/timeline"
yarn_create_path:
  - "/var/run/hadoop/{{ yarn_user }}"
  - "/var/log/hadoop/{{ yarn_user }}"
  - "{{ yarn_timeline_store }}"

yarn_timelineserver: "{{ groups['yarn_timeline_servers'] | first }}"
#TODO handle more than two yarn resource managers...
yarn_resource_manager_server1: "{{ groups['yarn_resource_managers'] | first }}"
yarn_resource_manager_server2: "{{ groups['yarn_resource_managers'] | last }}"

yarn_data_dirs:
  - /data/sdb1/yarn
#  - /data/sdc1/hdfs
#  - /data/sdd1/hdfs
#  - /data/sde1/hdfs
#  - /data/sdf1/hdfs
#  - /data/sdg1/hdfs

yarn_data_dirs_joined:  "{{ yarn_data_dirs | join(',') }}"

#TODO more than one?
mapreduce_history_server_host: "{{ groups['mapreduce_history_servers'] | first }}"
mapreduce_create_path:
  - "/var/run/hadoop/{{ mapreduce_user }}"
  - "/var/log/hadoop/{{ mapreduce_user }}"
  - "/hadoop/mapreduce"

#TODO create paths on hdfs before service can start...