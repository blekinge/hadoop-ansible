---

# hadoop basic vars
# Set a local file here, if you do not want to download it dynamicallyl
hadoop_version: "3.3.0"
hadoop_download: http://ftp.download-by.net/apache/hadoop/common/hadoop-{{hadoop_version}}/hadoop-{{hadoop_version}}.tar.gz
hadoop_path: "/usr/local/hadoop"
hadoop_config_path: "/etc/hadoop/conf/"
hadoop_tmp: "/tmp/hadoop"
hadoop_dfs_name: "/hdfs/dfs/name"
hadoop_dfs_data: "/hdfs/dfs/data"
hadoop_log_path: "/var/logs/hadoop/"

user: "root"
group: "hadoop"

hdfs_data_dirs:
  - "{{ hadoop_dfs_data }}"
#  - /data/sdb1/hdfs
#  - /data/sdc1/hdfs
#  - /data/sdd1/hdfs
#  - /data/sde1/hdfs
#  - /data/sdf1/hdfs
#  - /data/sdg1/hdfs

hdfs_data_dirs_joined:  "{{ hdfs_data_dirs | join(',') }}"

hadoop_hdfs_user: "hdfs"
hadoop_hdfs_create_path:
  - "{{ hadoop_tmp }}"
  - "{{ hadoop_dfs_name }}"
  - hdfs_data_dirs
  - "{{ hadoop_log_path }}"
  - "/var/run/hadoop"

hadoop_mapreduce_user: "mapred"
hadoop_yarn_user: "yarn"
hadoop_yarn_create_path: []

hadoop_zookeeper_user: "zookeeper"
hadoop_zookeeper_create_path: []




mapred_site_properties:
  - {
    "name": "mapreduce.framework.name",
    "value": "yarn"
  }
  - {
    "name": "mapreduce.admin.user.env",
    "value": "HADOOP_MAPRED_HOME=$HADOOP_COMMON_HOME"
  }
  - {
    "name":"yarn.app.mapreduce.am.env",
    "value":"HADOOP_MAPRED_HOME=$HADOOP_COMMON_HOME"
  }

yarn_resourcemanager_port: 8040
yarn_resourcemanager_scheduler_port: 8030
yarn_resourcemanager_webapp_port: 8088
yarn_resourcemanager_tracker_port: 8025
yarn_resourcemanager_admin_port: 8141

yarn_site_properties:
  - {
    "name":"yarn.resourcemanager.address",
    "value":"{{ master_hostname }}:{{ yarn_resourcemanager_port }}"
  }
  - {
    "name":"yarn.resourcemanager.scheduler.address",
    "value":"{{ master_hostname }}:{{ yarn_resourcemanager_scheduler_port }}"
  }
  - {
    "name":"yarn.resourcemanager.webapp.address",
    "value":"{{ master_hostname }}:{{ yarn_resourcemanager_webapp_port }}"
  }
  - {
    "name": "yarn.resourcemanager.resource-tracker.address",
    "value": "{{ master_hostname }}:{{ yarn_resourcemanager_tracker_port }}"
  }
  - {
    "name": "yarn.resourcemanager.admin.address",
    "value": "{{ master_hostname }}:{{ yarn_resourcemanager_admin_port }}"
  }
  - {
    "name": "yarn.nodemanager.aux-services",
    "value": "mapreduce_shuffle"
  }
  - {
    "name": "yarn.nodemanager.aux-services.mapreduce.shuffle.class",
    "value": "org.apache.hadoop.mapred.ShuffleHandler"
  }

dashbord_port: 9870
firewall_ports:
  - "{{ dashbord_port}}"
  - "{{ hdfs_port }}"
  - "{{ dfs_namenode_httpport }}"
  - "{{ yarn_resourcemanager_port }}"
  - "{{ yarn_resourcemanager_scheduler_port }}"
  - "{{ yarn_resourcemanager_webapp_port }}"
  - "{{ yarn_resourcemanager_tracker_port }}"
  - "{{ yarn_resourcemanager_admin_port }}"