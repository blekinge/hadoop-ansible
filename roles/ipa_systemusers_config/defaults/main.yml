---
# https://github.com/freeipa/ansible-freeipa/blob/master/roles/ipaclient/README.md#base-variables

ipa_server: "{{ groups['ipaserver'] | first }}"

ipa_admin_user:
  name: admin
  group: admins

ipaserver_autohome_dir: /sto-data/home
ipaserver_syshome_dir: /sto-data/syshome

ipaclient_autohome_dir: /autohome
ipaclient_syshome_dir: /syshome
#Nessesary to set up the automount
ipaautomount_location: "default"

#Users and groups
hadoop_group:
  name: "hadoop"
  gid: 11000
  description: Hadoop System Services


users_group:
  name: "yakusers"
  gid: 20000
  description: Standard user accounts, for unprivileged users.


systemservices_group:
  name: "systemservices"
  gid: 15000
  description: Standard user accounts, for non-hadoop services


subadmins_group:
  name: "subadmins"
  gid: 12000
  description: For daily administration of users and hosts

#These are the user groups that are automatically created
standard_user_groups:
  - "{{ hadoop_group }}"
  - "{{ systemservices_group }}"
  - "{{ subadmins_group }}"
  - "{{ users_group }}"

# These groups are also automaticall created, and all new users will be made members of them
default_user_groups:
  - "{{ users_group }}"


hdfs_user:
  name: "hdfs"
  group: "hdfs"
  uid: 11200
  gid: 11200
  private_group: yes
  extra_groups: [ "{{hadoop_group.name}}" ]

yarn_user:
  name: "yarn"
  group: "{{hadoop_group.name}}"
  uid: "{{hadoop_group.gid|int+2}}"
  gid: "{{hadoop_group.gid}}"
  private_group: no
  extra_groups: ["{{hadoop_group.name}}"]

mapreduce_user:
  name: "mapred"
  group: "{{hadoop_group.name}}"
  uid: "{{hadoop_group.gid|int+1}}"
  gid: "{{hadoop_group.gid}}"
  private_group: no
  extra_groups: ["{{hadoop_group.name}}"]

zookeeper_user:
  name: "zookeeper"
  group: "{{hadoop_group.name}}"
  uid: "{{hadoop_group.gid|int+3}}"
  gid: "{{hadoop_group.gid}}"
  private_group: no
  extra_groups: ["{{hadoop_group.name}}"]

spark_user:
  name: "spark"
  group: "{{hadoop_group.name}}"
  uid: "{{hadoop_group.gid|int+4}}"
  gid: "{{hadoop_group.gid}}"
  private_group: no
  extra_groups: ["{{hadoop_group.name}}"]

hive_user:
  name: "hive"
  group: "{{hadoop_group.name}}"
  uid: "{{hadoop_group.gid|int+5}}"
  gid: "{{hadoop_group.gid}}"
  private_group: no
  extra_groups: ["{{hadoop_group.name}}"]

rstudio_user:
  name: "rstudio-server"
  group: "rstudio-server"
  uid: "{{systemservices_group.gid|int+4}}"
  gid: "{{systemservices_group.gid|int+4}}"
  private_group: yes
  extra_groups: ["{{systemservices_group.name}}"]

jupyterhub_user:
  name: "jupyterhub"
  group: "jupyterhub"
  uid: "{{systemservices_group.gid|int+5}}"
  gid: "{{systemservices_group.gid|int+5}}"
  private_group: yes
  extra_groups: ["{{systemservices_group.name}}"]

system_users:
  - "{{hdfs_user}}"
  - "{{yarn_user}}"
  - "{{mapreduce_user}}"
  - "{{zookeeper_user}}"
  - "{{spark_user}}"
  - "{{hive_user}}"
  - "{{rstudio_user}}"
  - "{{jupyterhub_user}}"

